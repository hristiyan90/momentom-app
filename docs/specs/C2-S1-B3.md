# C2-S1-B3 — UX Wiring to Live GETs + Screenshot Refresh

**ID:** C2-S1-B3  
**Title:** UX Wiring to Live GETs + Screenshot Refresh  
**Owner:** Full-Stack (Cursor)  
**Status:** `{{status.features.C2-S1-B3}}` (see docs/config/status.yml)

## 1) User story & outcomes
- As an athlete, I see real data from live Supabase endpoints instead of mock data.
- As a developer, I have updated screenshots showing the app with real data for documentation.
- Success metrics: All UI components display live data; loading/error states work properly; screenshots reflect real data.

## 2) Scope
- **In:** Wire existing UI components to live GET endpoints; add proper loading/error/empty states; capture screenshots with real data.
- **Out:** New UI components, major design changes, performance optimizations.

## 3) Contracts (authoritative)
- **OpenAPI:** No new endpoints; wire existing GET endpoints to UI components
  - `GET /api/plan` — athlete plan view (phases, upcoming)
  - `GET /api/sessions?start&end&sport&cursor&limit` — sessions with keyset pagination
  - `GET /api/readiness?date` — readiness drivers and score
  - `GET /api/fuel/session/[id]` — fueling bands for sessions
  - `GET /api/workout-library` — workout library items
- **Data model:** Use existing Supabase tables with RLS policies
- **Headers/Cache:** Align with ETag/Auth policies (link policies)
- **UI States:** Loading, Empty, Error, Partial (206 responses), Success

## 4) Non-functionals
- Loading states: <2s initial load, skeleton UI during data fetch
- Error handling: Graceful degradation, retry mechanisms, user-friendly messages
- Responsive: All states work on mobile and desktop
- Accessibility: Screen reader friendly loading/error states
- Performance: Efficient data fetching, proper caching with ETags
- Screenshots: Use Europe/London timezone for consistent data

## 5) UX flow (1–2 images max)
1. User navigates to any page → Loading state shows immediately
2. Data loads from live endpoint → Success state with real data
3. If error occurs → Error state with retry option
4. If no data → Empty state with helpful message
5. If partial data (206) → Warning indicator + partial data display

## 6) Acceptance checks (verifiable)
- All existing UI components display live data from Supabase
- Loading states show skeleton UI during data fetch
- Error states display user-friendly messages with retry options
- Empty states show helpful guidance for users
- Partial data (206 responses) show warning indicators
- Screenshots captured for all major pages with real data
- All states work responsively on mobile and desktop
- ETag caching works properly (304 responses)
- cURL snippets verify live data endpoints work correctly

## 7) Open questions / needs clarification
- [ ] Which specific pages need screenshot updates? (All major pages)
- [ ] Should we add loading skeletons for all components? (Yes, for better UX)
- [ ] How to handle timezone differences in screenshots? (Use Europe/London)
- [ ] Should we add retry mechanisms for failed requests? (Yes, with exponential backoff)
- Blocking? No

## 8) Tasks (numbered)
T-1 Audit existing UI components and identify mock data usage
T-2 Create loading state components (skeleton UI, spinners)
T-3 Create error state components (error messages, retry buttons)
T-4 Create empty state components (helpful messages, CTAs)
T-5 Wire components to live GET endpoints with proper state management
T-6 Add ETag caching support for efficient data fetching
T-7 Test all UI states (loading, error, empty, success, partial)
T-8 Capture screenshots of all major pages with real data
T-9 Update documentation with new screenshots
T-10 Verify responsive behavior on mobile and desktop

## 9) Implementation Notes (Added 2025-09-20)
- **Current State:** UI components exist but use mock data
- **Key Challenge:** Proper state management for loading/error/empty states
- **Screenshot Requirements:** Use Europe/London timezone for consistent data
- **Performance:** Leverage existing ETag caching for efficient updates
- **Testing:** Verify all states work with real Supabase data
